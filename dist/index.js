class ${color="rgba(0, 0, 0, 1)";minAxisLength=100}var _=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(Q,N){if(Q==="2dGrid"){if(!N)N=new $;let E=_.call(this,"2d",N),S=()=>{let q=Math.min(this.width,this.height)/(N.minAxisLength*2);if(E.pixelMeterRatio=q,this.width>=this.height)E.X_MINMAX=[-(this.width/2)/q,this.width/2/q],E.Y_MINMAX=[-100,100];else E.X_MINMAX=[-100,100],E.Y_MINMAX=[-(this.height/2)/q,this.height/2/q]};E.metersToPixels=function(...j){return j.map((q)=>{return q*this.pixelMeterRatio})},E.transformCoordinates=function(j,q,H){let B=j.canvas.width/2,J=j.canvas.height/2;return[q,H]=this.metersToPixels(q,H),[B+q,J-H]},E.drawGrid=function(){this.beginPath();for(let j=this.Y_MINMAX[0];j<this.Y_MINMAX[1];j+=10)this.moveTo(this.X_MINMAX[0],j),this.lineTo(this.X_MINMAX[1],j);for(let j=0;j>this.X_MINMAX[0];j-=10)this.moveTo(j,this.Y_MINMAX[0]),this.lineTo(j,this.Y_MINMAX[1]);for(let j=0;j<this.X_MINMAX[1];j+=10)this.moveTo(j,this.Y_MINMAX[0]),this.lineTo(j,this.Y_MINMAX[1]);this.strokeStyle="rgb(61, 61, 61, 0.3)",this.stroke(),this.beginPath(),this.moveTo(this.X_MINMAX[0],0),this.lineTo(this.X_MINMAX[1],0),this.moveTo(0,this.Y_MINMAX[0]),this.lineTo(0,this.Y_MINMAX[1]),this.strokeStyle=N.color,this.stroke(),this.drawLabels()},E.drawLabels=function(){this.fillStyle="black",this.textAlign="center",this.textBaseline="middle";for(let j=10;j<this.Y_MINMAX[1];j+=10)this.fillText(j.toString(),2,j-1.4);for(let j=-10;j>this.Y_MINMAX[0];j-=10)this.fillText(j.toString(),2,j-1.4);for(let j=0;j<this.X_MINMAX[1];j+=10)this.fillText(j.toString(),j+2,-1.4);for(let j=-10;j>this.X_MINMAX[0];j-=10)this.fillText(j.toString(),j+2,-1.4)};let f=E.rect;E.rect=function(j,q,H,B){let[J,K]=this.transformCoordinates(this,j,q);return[H,B]=this.metersToPixels(H,B),f.call(this,J-H/2,K-B/2,H,B)};let D=E.moveTo;E.moveTo=function(j,q){let[H,B]=this.transformCoordinates(this,j,q);return D.call(this,H,B)};let L=E.lineTo;E.lineTo=function(j,q){let[H,B]=this.transformCoordinates(this,j,q);return L.call(this,H,B)};let k=E.arc;E.arc=function(j,q,H,B,J,K){let[P,T]=this.transformCoordinates(this,j,q);return k.call(this,P,T,H,B,J,K)};let z=E.fillText;E.fillText=function(j,q,H,B){let[J,K]=this.transformCoordinates(this,q,H);return B=B?this.metersToPixels(B)[0]:B,z.call(this,j,J,K,B)};let F=E.fillRect;E.fillRect=function(j,q,H,B){let[J,K]=this.transformCoordinates(this,j,q);return[H,B]=this.metersToPixels(H,B),F.call(this,J-H/2,K-B/2,H,B)},S();let U=new ResizeObserver(()=>{S()});U.observe(this);let Z=new MutationObserver((j)=>{for(let q of j)if(Array.from(q.removedNodes).includes(this))U.unobserve(this),Z.disconnect()});return Z.observe(document.body,{childList:!0,subtree:!0}),E}else return _.call(this,Q,N)};
